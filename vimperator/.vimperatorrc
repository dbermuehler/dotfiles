" Settings
set hintchars=hjklasdf
set gui=noaddons,nobookmarks,nomenu,nonavigation,tabs
set tabnumbers=true
" Follow the selected hint on <Return>
set followhints=1
set scroll=3
set hlsearch
set animations=true
set status="input,location,bookmark,ssl"
set editor='urxvt -e vim'
" order of completion list: t = tabs, l = location bar entries, s = search engine suggestions
set complete=tsl
" don't focus automatically the first textbox
set focuscontent=true

" Commands
command private -description "Opens Private Window" winopen -private about:newtab

" Mappings
map j <C-d>
map k <C-u>
map J <C-e>
map K <C-y>
map <C-S-p> :tabmove -1<CR>
map <C-S-n> :tabmove +1<CR>
map <C-x> :noscript toggletemp<CR>
map <silent> <leader>h :set nohlsearch<CR>

map <silent> <F2> :set toolbars=invmenu,invnavigation<CR>
map <silent> <F3> :set toolbars=invbookmarks<CR>

" Colorscheme
colorscheme desert

" Hide status bar when fullscreen mode is detected
autocmd Fullscreen .* js updateBottomBar()

" Re-enable bottom bar during certain commands.
noremap : :js updateBottomBar(false)<CR>:
noremap o :js updateBottomBar(false)<CR>o
noremap O :js updateBottomBar(false)<CR>O
noremap t :js updateBottomBar(false)<CR>t
noremap T :js updateBottomBar(false)<CR>t
noremap / :js updateBottomBar(false)<CR>/
cnoremap <CR> <CR>:js updateBottomBar()<CR>
cnoremap <Esc> <Esc>:js updateBottomBar()<CR>

:js << EOF

let hlContentSepValue = highlight.get('ContentSeparator').value

function updateBottomBar(close = window.fullScreen) {
  let bb = document.getElementById('liberator-bottombar')
  if (! bb) return

  if (close) {
    bb.style.height = '0px'
    bb.style.overflow = 'hidden'
    liberator.execute('highlight ContentSeparator display: none;')
  }
  else {
    bb.style.height = ''
    bb.style.overflow = ''
    liberator.execute('highlight ContentSeparator ' + hlContentSepValue)
  }
}
updateBottomBar()
EOF
